# render.yaml
# âœ… This file configures both the web app and the background retraining worker for Render
# âœ… We are using runtime.txt to specify the Python version, so we DO NOT include `pythonVersion` here

services:
  - type: web
    name: marketplayground-backend           # ğŸŒ Main FastAPI web app
    env: python
    plan: starter                            # ğŸ’¸ Starter plan ($7/mo)
    buildCommand: "pip install -r requirements.txt"
    startCommand: "uvicorn app:app --host 0.0.0.0 --port 10000"
    envVars:
      - key: PORT
        value: 10000
    rootDir: backend                         # ğŸ“ Tells Render to run this from /backend

  - type: worker
    name: retrain-worker                     # ğŸ§  Background worker for retraining model
    env: python
    plan: starter                            # ğŸ’¸ Starter plan ($7/mo)
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python retrain_worker.py"
    rootDir: backend                         # ğŸ“ Also runs from /backend
